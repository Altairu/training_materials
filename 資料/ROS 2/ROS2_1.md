---
marp: true
---

# ROS 2講習 第一回
### 4S 野口 史遠

---
## ROS 2の基礎知識

ROS 2は多くの実行中のプログラム間で通信してロボットを動かす。このプログラムのことを`ノード(node)`という

つまりロボットを動かすにはROS 2の通信を理解しないといけない。



### 通信方法
ros2の通信方法には
`トピック通信` `サ−ビス通信` `アクション通信` `パラメーター通信`
の４つがある。

---

## 1. トピック（Topic）
### 概要
- １方向・非同期通信
### 用途
多くのノードに同じデータを送る場合
センサーデータの配信・受信
カメラ，LIDARとか

---
![Alt text](image-1.png)

イメージ：テレビ
テレビ局に該当するデータの送り手を`パブリッシャ(pablisher)`
視聴者に該当する受け手を`サブスクライバ(subscriber)`という
番組のチャンネルが`トピック`といいデータを`メッセージ`と呼ぶ

---

## 2. サービス（Service）

### 概要
- 双方向・同期通信
### 用途
すぐに終了するタスク
電源の起動確認，モード切替
カメラ，LIDARなどのセンサーの動作モード切替

---

![Alt text](image.png)

イメージ：Google検索
データの送り手を`クライアント（client）`
そのデータを処理して応答する側を`サーバ(server)`という．
クライアントからサーバに仕事を依頼することを`リクエスト`，そのデータを`リクエストメッセージ`，サーバが結果をクライアントに返すことを`レスポンス`，そのデータを`レスポンスメッセージ`と呼ぶ

---

## 3. アクション（Action）
### 概要
- 双方向・同期通信，サービス通信より高性能
### 用途
ナビゲーションなどタスク終了までに時間がかかり，途中経過も知りたい複雑なタスクのとき

---

![Alt text](image-2.png)
サービスとトピックの両方を使用している

---

## 4. パラメータ（Parameter）
### 概要
- ノードの振る舞いを変えるパラメータ専用通信
### 用途
ロボットの動作などを実行中に変えたいとき


---
## コマンド

ROS１はLinux環境でしか使用できなかったため,ROS2もLinux文化の影響が強くGUIではなく，コマンドを使用するCUIアプリを使用することが一般的

## コマンドが使えないとROS２を使うことは非っ常にキビシー
ROS2ではコマンドとしてros2コマンドを使う
どんなのがあるか調べてみよう

```
ros2 --help
```
```
ros2 サブコマンド　--help
```
---

| サブコマンド | 内容                                                                                                         | 
| -------------- | --------------------------------------------------------------------------------------------------------- | 
| action       | アクション通信関連                                                                                           | 
| bag          | Rocbag関連.rosbagはセンサ情報を記録，再生する強力なツール                                                    | 
| launch       | ローチンファイルを実行．<br>ローチンファイルは複数ののーどやその設定などをまとめて起動するために使うファイル | 
| node         | ノード関連                                                                                                   | 
| pkg          | パッケージ関連                                                                                               | 
| run          | パッケージの実行可能ファイルを実行                                                                           | 
| service      | サービス通信関連                                                                                             | 
| topic        | トピック関連                                                                                                 | 

---
# 初めてのROS2プログラミング

プログラムの流れ：作業スペースを作る，パッケージはこの中に
1. ワークスペースの作成：ROS2はパッケージ単位でプログラムを作る
2. パッケージの作成：ノードのソースコードを作る
3. ソースコードの作成：ノードの実行ファイルを作る
4. ビルド：ノードの実行ファイルを作る
5. 設定ファイルの反映：ノードが実行できるように環境を整える
6. ノードの実行

---
# １.ワークスペースの作成